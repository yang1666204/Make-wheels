<script>
    //nodejs打包的时候我们会使用fs.readfileSync()来读取js文件
    //这样的话js文件就是字符串
    //这里使用eval来运行字符串      事实上webpack最原始的源码就是用的eval
    //使用自运行函数，形成闭包，防止在子模块的变量污染全局
    //核心代码
    (function (lists) {
        function require(file) {
            var exports = {};
            (function (exports, code) {
                eval(code)

            })(exports, lists[file])
            return exports
        }
        require('index.js').default
    })({
        "index.js":`var add = require('add.js').default;console.log(add(1,4))`,
        "add.js":`exports.default = function (a, b) {return a + b;};`
    })


</script>