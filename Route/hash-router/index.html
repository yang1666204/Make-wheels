<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="link">
        <a href="#/hashRouter1">
            <h1>hashRouter1</h1>
        </a>
        <a href="#/hashRouter2">
            <h1>hashRouter2</h1>
        </a>
        <a href="#/hashRouter3">
            <h1>hashRouter3</h1>
        </a>
        <a href="#/asdasdas">
            <h1>not found</h1>
        </a>
    </div>
    <div id="container"></div>
</body>
<script>
    class HashRouter {
        constructor() {
            this.cache = {}     //存储路由
            window.addEventListener('hashchange', this.load.bind(this))
        }
        register(routername, callback = () => { }) {       //注册路由
            this.cache[routername] = callback
        }
        registerIndex(callback = () => { }) {
            this.cache['/index'] = callback
        }
        load(e) {
            let targetRouter = window.location.hash.slice(1)
            if (!targetRouter) {
                this.cache['/index']()
                return
            }
            for (let router in this.cache) {
                if (router === targetRouter) {
                    this.cache[router]()
                    return
                }
            }
            this.cache['/notFound']()

        }

    }
    const hash = new HashRouter
    function hashRouter1Change() {
        document.getElementById('container').innerHTML = 'I am hashRouter1'
    }
    function hashRouter2Change() {
        document.getElementById('container').innerHTML = 'I am hashRouter2'
    }
    function hashRouter3Change() {
        document.getElementById('container').innerHTML = 'I am hashRouter3'
    }
    function hashRouterChange() {
        document.getElementById('container').innerHTML = 'I am home'
    }
    function hashNotFound() {
        document.getElementById('container').innerHTML = '404 sorry,the page is not found!'
    }
    hash.registerIndex(hashRouterChange)
    hash.register('/hashRouter1', hashRouter1Change)
    hash.register('/hashRouter2', hashRouter2Change)
    hash.register('/hashRouter3', hashRouter3Change)
    hash.register('/notFound', hashNotFound)
    hash.load()
</script>

</html>